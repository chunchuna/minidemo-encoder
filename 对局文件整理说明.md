# CS:GO Match Organizer - 对局文件整理工具

## 功能说明

这个工具用于将 `output` 目录中解析好的对局文件自动整理并复制到 CS:GO 的 SourceMod 目录中。

### 主要功能：
1. 自动识别对局文件夹中的地图名称
2. 按地图分类放置到对应的地图文件夹（de_nuke, de_dust2 等）
3. 自动创建递增的数字文件夹（1, 2, 3...）
4. 复制所有 round 子文件夹到目标位置

## 使用方法

### 方法1：使用批处理脚本（推荐）

直接双击运行 `organize_matches.bat`

工具会自动：
- 扫描 `output` 目录
- 将文件复制到默认目标目录：
  ```
  D:\SteamLibrary\steamapps\common\Counter-Strike Global Offensive\csgo\addons\sourcemod\data\botmimic\demotest
  ```

### 方法2：命令行使用

```bash
# 使用默认设置
match_organizer.exe

# 指定输出目录
match_organizer.exe -output=./output

# 指定目标目录
match_organizer.exe -target="D:\path\to\csgo\botmimic\demotest"

# 预览模式（不实际复制，只显示操作）
match_organizer.exe -dry

# 组合使用
match_organizer.exe -output=./output -target="custom\path" -dry
```

## 参数说明

- `-output`: 源目录，包含解析后的对局文件夹（默认：`./output`）
- `-target`: 目标 CS:GO 目录（默认：`D:\SteamLibrary\steamapps\common\Counter-Strike Global Offensive\csgo\addons\sourcemod\data\botmimic\demotest`）
- `-dry`: 预览模式，不实际执行复制操作

## 目录结构示例

### 处理前（output目录）：
```
output/
├── 9ine-vs-apeks-m1-nuke/
│   ├── round1_T0-CT0/
│   ├── round2_T0-CT1/
│   └── ...
├── lynn-vision-vs-rare-atom-m3-nuke/
│   ├── round1_T0-CT0/
│   └── ...
└── og-vs-liquid-m1-overpass/
    ├── round1_T0-CT0/
    └── ...
```

### 处理后（CS:GO目录）：
```
demotest/
├── de_nuke/
│   ├── 1/
│   │   ├── round1_T0-CT0/
│   │   ├── round2_T0-CT1/
│   │   └── ...
│   └── 2/
│       ├── round1_T0-CT0/
│       └── ...
├── de_overpass/
│   └── 1/
│       ├── round1_T0-CT0/
│       └── ...
└── ...
```

## 支持的地图

工具会自动识别以下地图名称：

| 文件夹后缀 | 目标文件夹 |
|----------|----------|
| ancient  | de_ancient |
| anubis   | de_anubis |
| cache    | de_cache |
| dust2    | de_dust2 |
| inferno  | de_inferno |
| mirage   | de_mirage |
| nuke     | de_nuke |
| overpass | de_overpass |
| train    | de_train |
| vertigo  | de_vertigo |

## 注意事项

1. **必须先运行批量解析**：确保 `output` 目录中有对局文件
2. **自动创建地图文件夹**：如果目标目录中没有地图文件夹，工具会自动创建所有10个地图文件夹（de_ancient, de_anubis, de_cache, de_dust2, de_inferno, de_mirage, de_nuke, de_overpass, de_train, de_vertigo）
3. **自动递增编号**：工具会自动找到下一个可用的数字文件夹编号
4. **文件夹命名格式**：对局文件夹必须以 `-地图名` 结尾（如 `xxx-nuke`）
5. **建议先预览**：第一次使用时建议加 `-dry` 参数预览操作

## 故障排查

### 提示"Source directory does not exist"
- 检查是否在正确的目录运行工具
- 确保 `output` 目录存在

### 提示"Target directory does not exist"  
- 检查 CS:GO 安装路径是否正确
- 确保 SourceMod 已安装
- 需要确保目标路径 `...\sourcemod\data\botmimic\demotest` 目录存在（工具只会自动创建地图子文件夹，不会创建demotest目录本身）

### 提示"Could not extract map name"
- 检查对局文件夹命名是否符合格式：`xxx-地图名`
- 地图名必须是支持的地图之一

## 示例输出

### 首次使用（自动创建地图文件夹）

```
========================================
CS:GO Match Organizer
========================================
Source directory: ./output
Target directory: D:\SteamLibrary\...\demotest
========================================

Created map folder: de_ancient
Created map folder: de_anubis
Created map folder: de_cache
Created map folder: de_dust2
Created map folder: de_inferno
Created map folder: de_mirage
Created map folder: de_nuke
Created map folder: de_overpass
Created map folder: de_train
Created map folder: de_vertigo
Created 10 map folders

Found 38 match folders

Processing map: de_nuke (8 matches)
  [1] 9ine-vs-apeks-m1-nuke -> D:\...\de_nuke\1
    Copied 23 round folders
  [2] lynn-vision-vs-rare-atom-m3-nuke -> D:\...\de_nuke\2
    Copied 18 round folders
  ...

Processing map: de_inferno (6 matches)
  [1] og-vs-liquid-m2-inferno -> D:\...\de_inferno\1
    Copied 20 round folders
  ...

========================================
Successfully organized 38 matches
========================================
```

### 正常使用（地图文件夹已存在）

```
========================================
CS:GO Match Organizer
========================================
Source directory: ./output
Target directory: D:\SteamLibrary\...\demotest
========================================

Found 38 match folders

Processing map: de_nuke (8 matches)
  [3] 9ine-vs-apeks-m1-nuke -> D:\...\de_nuke\3
    Copied 23 round folders
  [4] lynn-vision-vs-rare-atom-m3-nuke -> D:\...\de_nuke\4
    Copied 18 round folders
  ...

========================================
Successfully organized 38 matches
========================================
``` 