# 快速开始指南

本指南将帮助您快速使用 minidemo-encoder 工具套件。

## 📋 前置要求

1. 安装 Go 语言环境（1.16+）
2. 准备好 CS:GO Demo 文件（.dem）

## 🚀 快速工作流程

### 步骤 1️⃣：批量解析 Demo 文件

将所有 demo 文件放在一个文件夹中（如 `./demo`），然后运行：

**Windows:**
```batch
batch_parse.bat
```

**Linux/Mac:**
```bash
chmod +x batch_parse.sh
./batch_parse.sh
```

💡 **提示：** 如果 demo 文件在其他位置，可以指定路径：
```batch
batch_parse.bat "D:\CSGO\demos"
```

### 步骤 2️⃣：平衡 REC 文件（可选但推荐）

确保每个 t/ct 文件夹都有 5 个不同的 rec 文件。工具会自动从同一地图的其他文件夹（同一局的其他回合或不同局的回合）复制文件进行补全：

**Windows:**
```batch
rec_balance.bat "D:\SteamLibrary\steamapps\common\Counter-Strike Global Offensive\csgo\addons\sourcemod\data\botmimic\demotest"
```

**Linux/Mac:**
```bash
chmod +x rec_balance.sh
./rec_balance.sh /path/to/botmimic/demotest
```

### 步骤 3️⃣：使用输出文件

解析后的 `.rec` 文件可以配合 BotMimic 插件在游戏服务器中使用。

## 📁 输出结构示例

```
output/
├── match1/                    # Demo 名称
│   ├── round1_T5-CT5/        # 回合信息
│   │   ├── t/                # T 方玩家录像
│   │   │   ├── player1.rec
│   │   │   ├── player2.rec
│   │   │   ├── player3.rec
│   │   │   ├── player4.rec
│   │   │   └── player5.rec
│   │   └── ct/               # CT 方玩家录像
│   │       ├── player6.rec
│   │       ├── player7.rec
│   │       ├── player8.rec
│   │       ├── player9.rec
│   │       └── player10.rec
│   └── round2_T4-CT5/
│       └── ...
└── match2/
    └── ...
```

## 🛠️ 单个 Demo 解析

如果只需要解析单个 demo 文件：

```bash
go run cmd/main.go -file="path/to/demo.dem"
```

## 📖 详细文档

- [批量解析说明](批量解析说明.md)
- [REC 平衡工具说明](REC平衡工具说明.md)
- [完整 README](README.md)

## ⚠️ 常见问题

### 1. 找不到 Go 命令？

请先安装 Go 语言环境：https://golang.org/dl/

### 2. 编译失败？

尝试更新依赖：
```bash
cd minidemo-encoder
go mod tidy
```

### 3. Demo 解析出错？

- 确认 demo 文件完整且未损坏
- 避免使用完美竞技平台的 demo（格式不兼容）
- 推荐使用 HLTV 下载的职业比赛 demo

### 4. 某些回合玩家数量不足？

这是正常现象（玩家中途加入/退出），使用 REC 平衡工具补全即可。

## 💡 推荐工作流程

```
┌─────────────────┐
│  收集 Demo 文件  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  批量解析 Demo   │  ← batch_parse.bat
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  平衡 REC 文件   │  ← rec_balance.bat
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  在游戏中使用    │  ← BotMimic 插件
└─────────────────┘
```

## 🎯 完整示例

假设您有以下结构：

```
D:/
└── CSGO/
    ├── demos/                           # 原始 demo 文件
    │   ├── match1.dem
    │   ├── match2.dem
    │   └── tournament.dem
    └── minidemo-encoder/                # 工具目录
        ├── batch_parse.bat
        ├── rec_balance.bat
        └── ...
```

**操作步骤：**

1. 在 `minidemo-encoder` 目录下打开命令行

2. 解析 demo：
   ```batch
   batch_parse.bat "D:\CSGO\demos"
   ```

3. 等待解析完成，输出在 `output/` 文件夹

4. 将 `output/` 中的文件复制到游戏服务器的 botmimic 数据目录

5. 如果需要平衡文件数量：
   ```batch
   rec_balance.bat "D:\SteamLibrary\steamapps\common\Counter-Strike Global Offensive\csgo\addons\sourcemod\data\botmimic\demotest"
   ```

完成！🎉

## 🔗 相关链接

- [BotMimic 插件](https://github.com/peace-maker/botmimic)
- [csgowiki-pack](https://github.com/csgowiki/csgowiki-pack/tree/dev-1.4.4)
- [HLTV Demo 下载](https://www.hltv.org/matches) 